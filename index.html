<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fatehpur Hubs - Local Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script type="text/javascript" src="ads.js"></script>
    <style>
        body {font-family: 'Inter', sans-serif;background-color:#f0f4f8;color:#333;margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;}
        #app-container {width:100%;max-width:420px;background:#fff;box-shadow:0 0 20px rgba(0,0,0,0.1);border-radius:12px;overflow:hidden;display:flex;flex-direction:column;min-height:100vh;}
        #app-header {background:#2a5298;color:white;padding:15px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px rgba(0,0,0,0.1);position:sticky;top:0;z-index:10;}
        .logo {font-size:1.5rem;font-weight:bold;}
        .logout-btn {background:#ff4d4f;color:white;padding:5px 10px;border-radius:8px;font-size:0.8rem;font-weight:600;border:none;cursor:pointer;transition:background-color .2s;}
        .logout-btn:hover {background:#d9363e;}
        #nav-bar {display:flex;justify-content:space-around;background:#fff;border-top:1px solid #eee;position:fixed;bottom:0;width:100%;max-width:420px;box-shadow:0 -2px 5px rgba(0,0,0,0.05);z-index:10;}
        .nav-item {flex-grow:1;text-align:center;padding:10px 0;cursor:pointer;color:#777;font-size:0.75rem;transition:color .2s;}
        .nav-item.active {color:#2a5298;}
        .nav-item i {display:block;font-size:1.2rem;margin-bottom:3px;}
        #mainApp {flex-grow:1;overflow-y:auto;padding-bottom:80px;}
        .screen {display:none;padding:15px;min-height:100%;}
        .screen.active {display:block;}
        #registrationScreen {display:flex;flex-direction:column;justify-content:center;align-items:center;padding:30px;text-align:center;height:100vh;}
        #registrationScreen h2 {color:#2a5298;margin-bottom:20px;}
        .input-group, #otpSection {width:100%;margin-bottom:15px;}
        input[type="text"], input[type="number"] {width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:1rem;}
        .main-btn {background:#2a5298;color:white;padding:12px 20px;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;transition:background-color .2s;width:100%;margin-top:10px;}
        .main-btn:hover {background:#1e3a66;}
        #loginMsg {margin-top:15px;font-weight:600;}
        #mistri-categories {display:flex;overflow-x:auto;padding:10px 0;white-space:nowrap;margin-bottom:15px;border-bottom:1px solid #eee;}
        .cat-btn {padding:8px 15px;margin-right:10px;background:#e5e7eb;color:#333;border:none;border-radius:20px;font-size:0.9rem;cursor:pointer;transition:all .2s;flex-shrink:0;}
        .cat-btn.selected {background:#2a5298;color:white;font-weight:bold;}
        #search-container {margin-bottom:15px;}
        #main-search-bar {width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:1rem;}
        .profile-card {background:#f9f9f9;padding:15px;border-radius:10px;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,0.05);border-left:5px solid #ffc107;}
        .profile-card h4 {margin:0 0 5px 0;font-size:1.1rem;}
        .profile-card p {margin:0;font-size:0.9rem;}
        .whatsapp-btn, .contact-btn, .share-btn {padding:8px 10px;border:none;border-radius:6px;cursor:pointer;font-size:0.85rem;font-weight:600;transition:opacity .2s;}
        .whatsapp-btn {background:#25d366;color:white;}
        .contact-btn {background:#007bff;color:white;}
        .share-btn {background:#9c27b0;color:white;}
        .ad-card {background:#e3f2fd;padding:15px;border-radius:10px;margin-bottom:15px;text-align:center;border:1px dashed #2a5298;}
        .ad-card button {background:#ff9800;color:white;padding:8px 15px;border:none;border-radius:6px;font-size:0.9rem;margin-top:10px;}
        .form-container {background:#f9f9f9;padding:20px;border-radius:10px;box-shadow:0 1px 5px rgba(0,0,0,0.08);margin-bottom:20px;}
        .form-container h3 {color:#2a5298;border-bottom:2px solid #ddd;padding-bottom:10px;margin-top:0;}
        .form-field {margin-bottom:15px;}
        .form-field label {display:block;font-weight:600;margin-bottom:5px;font-size:0.9rem;}
        .form-field input, .form-field select, .form-field textarea {width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;font-size:0.95rem;}
        .submit-btn {background:#4caf50;color:white;padding:12px 20px;border:none;border-radius:8px;cursor:pointer;font-size:1rem;width:100%;}
    </style>
</head>
<body>
    <div id="app-container">

        <!-- REGISTRATION SCREEN -->
        <div id="registrationScreen" style="display:none;">
            <h2>Fatehpur Hubs: Services & Jobs</h2>
            <div id="loginMsg">कृपया लॉगिन करें</div>
            <div id="profileInputSection" class="input-group">
                <input type="text" id="userName" placeholder="आपका नाम (Name)" required>
                <input type="text" id="userArea" placeholder="आपका एरिया/मोहल्ला (Area)" required style="margin-top:10px;">
                <input type="number" id="phoneInput" placeholder="10 अंक का फ़ोन नंबर" maxlength="10" required style="margin-top:10px;">
                <button id="sendOtpBtn" class="main-btn">Send OTP & Sign Up</button>
            </div>
            <div id="otpSection" class="input-group" style="display:none;">
                <input type="number" id="otpInput" placeholder="6 अंक का OTP" maxlength="6" required>
                <button id="verifyOtpBtn" class="main-btn">Verify OTP & Login</button>
            </div>
            <p style="font-size:0.8rem;color:#777;margin-top:20px;">Firebase Phone Authentication द्वारा सुरक्षित।</p>
            <div id="recaptcha-container"></div>
        </div>

        <!-- MAIN APP -->
        <div id="mainApp" style="display:none;">
            <header id="app-header">
                <div class="logo">Fatehpur Hubs</div>
                <button class="logout-btn" onclick="window.logOut()">Logout</button>
            </header>

            <div id="mainAppContent">

                <!-- HOME SCREEN -->
                <div id="home-screen" class="screen active">
                    <div class="ad-container">
                        <script type="text/javascript">
                            atOptions = { 'key' : '969a80a2e6bea9f00173f36024f32cb2', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
                            document.write('<script type="text/javascript" src="//www.highperformanceformat.com/969a80a2e6bea9f00173f36024f32cb2/invoke.js"><\/script>');
                        </script>
                    </div>
                    <div id="ad-placeholder-top" class="ad-card" onclick="window.contactForAds()">
                        <p style="font-size:1.1rem;font-weight:bold;color:#2a5298;">अपने बिज़नेस का Ad यहाँ लगवाएँ! (Top Ad)</p>
                        <p style="font-size:0.9rem;color:#555;">अपने कस्टमर्स तक पहुँचें।</p>
                        <button>Contact for Ads</button>
                    </div>
                    <div id="search-container">
                        <input type="text" id="main-search-bar" placeholder="सेवा या एरिया के अनुसार खोजें..." onkeyup="searchServices()">
                    </div>
                    <div id="mistri-categories"></div>
                    <div id="mistri-list"></div>
                    <div class="ad-container" style="width:300px;height:250px;margin:20px auto;border:1px solid #ddd;text-align:center;">
                        <script type="text/javascript">
                            atOptions = {'key':'d65603602583bbe6bc3308e8ee8ab792','format':'iframe','height':250,'width':300,'params':{}};
                        </script>
                        <script type="text/javascript" src="//www.highperformanceformat.com/d65603602583bbe6bc3308e8ee8ab792/invoke.js"></script>
                    </div>
                    <button id="load-more-providers" class="main-btn" style="display:none;margin:15px auto;" onclick="loadCategories(true)">Load More Services</button>
                </div>

                <!-- ADD SERVICE SCREEN -->
                <div id="add-service-screen" class="screen">
                    <div class="form-container">
                        <h3>सर्विस प्रोवाइडर जोड़ें</h3>
                        <form id="serviceForm" onsubmit="return registerService()">
                            <div class="form-field"><label for="providerName">नाम</label><input type="text" id="providerName" required></div>
                            <div class="form-field"><label for="providerPhone">फ़ोन नंबर (10 अंक)</label><input type="number" id="providerPhone" maxlength="10" required></div>
                            <div class="form-field"><label for="serviceCategory">कैटेगरी चुनें</label>
                                <select id="serviceCategory" required>
                                    <option value="">-- चुनें --</option>
                                    <option value="Plumber">प्लम्बर (Plumber)</option><option value="Electrician">इलेक्ट्रीशियन (Electrician)</option><option value="Carpenter">बढ़ई (Carpenter)</option><option value="Mason">मिस्त्री (Mason)</option><option value="Painter">पेंटर (Painter)</option><option value="AC Mechanic">AC मैकेनिक</option><option value="Tiler">टाइलर (Tiler)</option><option value="Beautician">ब्यूटीशियन</option><option value="Home Cleaning">होम क्लीनिंग</option><option value="Security Guard">सिक्योरिटी गार्ड</option><option value="Laundry Service">लॉन्ड्री सर्विस</option><option value="Legal Consultant">कानूनी सलाहकार</option><option value="Private Teacher">प्राइवेट टीचर</option><option value="Computer Repair">कंप्यूटर/मोबाइल रिपेयर</option><option value="Welder">वेल्डर</option>
                                </select>
                            </div>
                            <div class="form-field"><label for="providerArea">एरिया/मोहल्ला</label><input type="text" id="providerArea" required></div>
                            <div class="form-field"><label for="providerExperience">अनुभव (सालों में)</label><input type="number" id="providerExperience" required min="0"></div>
                            <button type="submit" class="submit-btn">रजिस्टर करें</button>
                        </form>
                    </div>
                </div>

                <!-- JOBS SCREEN -->
                <div id="jobs-screen" class="screen">
                    <div class="form-container">
                        <h3>जॉब पोस्ट करें</h3>
                        <form id="jobForm" onsubmit="return jobRegister()">
                            <div class="form-field"><label for="jobTitle">जॉब टाइटल</label><input type="text" id="jobTitle" required></div>
                            <div class="form-field"><label for="jobShopName">दुकान/कंपनी का नाम</label><input type="text" id="jobShopName" required></div>
                            <div class="form-field"><label for="jobLocation">जॉब लोकेशन</label><input type="text" id="jobLocation" required></div>
                            <div class="form-field"><label for="jobSalary">सैलरी/वेतन</label><input type="number" id="jobSalary" required min="1000"></div>
                            <div class="form-field"><label for="jobPhone">संपर्क फ़ोन नंबर</label><input type="number" id="jobPhone" maxlength="10" required></div>
                            <div class="form-field"><label for="jobDescription">जॉब का विवरण</label><textarea id="jobDescription" rows="3" required></textarea></div>
                            <button type="submit" class="submit-btn" style="background:#ff9800;">जॉब पोस्ट करें</button>
                        </form>
                    </div>
                    <h3 style="color:#2a5298;">उपलब्ध नौकरियाँ</h3>
                    <div id="job-list"></div>
                </div>

                <!-- SHARE SCREEN -->
                <div id="share-screen" class="screen">
                    <div class="ad-card" style="margin-top:30px;padding:40px;">
                        <i class="fas fa-share-alt" style="font-size:3rem;color:#2a5298;margin-bottom:15px;"></i>
                        <h3 style="color:#2a5298;margin-bottom:10px;">Fatehpur Hubs को शेयर करें!</h3>
                        <p>यह ऐप फतेहपुर के लोगों के लिए है। कृपया इसे अपने दोस्तों और परिवार के साथ शेयर करें।</p>
                        <button onclick="window.shareApp()" class="main-btn" style="background:#00bcd4;">अभी शेयर करें</button>
                    </div>
                </div>

            </div>

            <!-- YEH HAI NAYA STICKY BOTTOM AD (हर स्क्रीन पर footer के ठीक ऊपर) -->
            <div id="global-sticky-bottom-ad" style="position:fixed;bottom:56px;left:50%;transform:translateX(-50%);width:320px;height:50px;background:white;border-radius:12px;box-shadow:0 -4px 15px rgba(0,0,0,0.12);overflow:hidden;z-index:8;padding:4px;display:none;">
                <div style="width:100%;height:100%;border-radius:8px;overflow:hidden;">
                    <script type="text/javascript">
                        atOptions = {'key':'969a80a2e6bea9f00173f36024f32cb2','format':'iframe','height':50,'width':320,'params':{}};
                        document.write('<script type="text/javascript" src="//www.highperformanceformat.com/969a80a2e6bea9f00173f36024f32cb2/invoke.js"><\/script>');
                    </script>
                </div>
            </div>

            <!-- NAV BAR -->
            <div id="nav-bar">
                <div class="nav-item active" onclick="showScreen('home-screen')"><i class="fas fa-home"></i> होम</div>
                <div class="nav-item" onclick="showScreen('add-service-screen')"><i class="fas fa-tools"></i> सर्विस जोड़ें</div>
                <div class="nav-item" onclick="showScreen('jobs-screen')"><i class="fas fa-briefcase"></i> नौकरियाँ</div>
                <div class="nav-item" onclick="showScreen('share-screen')"><i class="fas fa-share-alt"></i> शेयर</div>
            </div>
        </div>
    </div>

    <script>
        // तुम्हारा पूरा JavaScript यहाँ आएगा (बिल्कुल वैसा का वैसा)
        const firebaseConfig = {apiKey:"AIzaSyA37JsLUIG-kypZ55vdpLTp3WKHgRH2IwY",authDomain:"fatehpur-hubs-a3a9f.firebaseapp.com",databaseURL:"https://fatehpur-hubs-a3a9f-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fatehpur-hubs-a3a9f",storageBucket:"fatehpur-hubs-a3a9f.appspot.com",messagingSenderId:"294360741451",appId:"1:294360741451:web:3bc85078805750b9fabfce"};
        // बाकी सारा script तुम्हारा पुराना वाला paste कर दो (नीचे तक)

        window.onload = () => {
            firebase.initializeApp(firebaseConfig);
            window.database = firebase.database();
            window.providersRef = database.ref('service_providers');
            window.jobsRef = database.ref('local_jobs');
            // तुम्हारा सारा पुराना code यहाँ paste कर दो...

            // सिर्फ़ ये 4 लाइन नई हैं – bottom ad दिखाने के लिए
            setTimeout(() => {
                const ad = document.getElementById('global-sticky-bottom-ad');
                if(ad) ad.style.display = 'block';
            }, 3000);
        };
    </script>
    <script type="text/javascript" src="ads.js"></script>
    <script>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('sw.js');});}</script>
</body>
</html>
