<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fatehpur Hubs - Local Services & Jobs</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json?v=3.0">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <!-- Agar script.js mein Firebase config nahi hai to ye daal dena -->
    <!-- <script>
        const firebaseConfig = { ...tumhara config... };
        firebase.initializeApp(firebaseConfig);
    </script> -->

    <!-- Yeh line daal do – error aaye to white screen nahi aayegi -->
    <script>
        window.onerror = function(msg, url, line) {
            document.body.innerHTML = `<div style="padding:30px;text-align:center;color:#d00;font-family:sans-serif;">
                <h2>App में गड़बड़ हुई</h2>
                <p><b>Error:</b> ${msg}</p>
                <p><b>Line:</b> ${line}</p>
                <button onclick="location.reload()" style="padding:12px 30px;background:#2a5298;color:white;border:none;border-radius:8px;margin-top:20px;font-size:16px;">फिर से खोलें</button>
            </div>`;
            return true;
        };
    </script>

    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="ads.js"></script>
    
</head>
<body> 
    
    <div id="app-container">

        <!-- AUTH SCREEN -->
        <div id="registrationScreen" style="display: none;">
            <h2>Fatehpur Hubs: Services & Jobs</h2>
            <div id="loginMsg">कृपया लॉगिन करें</div>

            <div id="profileInputSection" class="input-group">
                <input type="text" id="userName" placeholder="आपका नाम (Name)" required>
                <input type="text" id="userArea" placeholder="आपका एरिया/मोहल्ला (Area)" required style="margin-top: 10px;">
                <input type="number" id="phoneInput" placeholder="10 अंक का फ़ोन नंबर" maxlength="10" required style="margin-top: 10px;">
                <button id="sendOtpBtn" class="main-btn">Send OTP & Sign Up</button>
            </div>

            <div id="otpSection" class="input-group" style="display: none;">
                <input type="number" id="otpInput" placeholder="6 अंक का OTP" maxlength="6" required>
                <button id="verifyOtpBtn" class="main-btn">Verify OTP & Login</button>
            </div>
            
            <p style="font-size: 0.8rem; color: #777; margin-top: 20px;">Firebase Phone Authentication द्वारा सुरक्षित।</p>
            <div id="recaptcha-container"></div>
        </div>

        <!-- MAIN APP -->
        <div id="mainApp" style="display: none;">

            <header id="app-header">
                <div class="logo">Fatehpur Hubs</div>
                <button class="logout-btn" onclick="window.logOut()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </header>

            <div id="mainAppContent" style="padding-bottom:90px;">

                <!-- HOME SCREEN -->
                <div id="home-screen" class="screen active">
                    <div class="ad-container">
                        <script type="text/javascript">
                            atOptions = { 'key' : '969a80a2e6bea9f00173f36024f32cb2', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
                            document.write('<script type="text/javascript" src="//www.highperformanceformat.com/969a80a2e6bea9f00173f36024f32cb2/invoke.js"><\/script>');
                        </script>
                    </div>

                    <div id="ad-placeholder-top" class="ad-card" onclick="window.contactForAds()">
                        <p style="font-size: 1.1rem; font-weight: bold; color: #2a5298;">अपने बिज़नेस का Ad यहाँ लगवाएँ! (Top Ad)</p>
                        <p style="font-size: 0.9rem; color: #555;">अपने कस्टमर्स तक पहुँचें।</p>
                        <button>Contact for Ads</button>
                    </div>

                    <div id="search-container">
                        <input type="text" id="main-search-bar" placeholder="सेवा या एरिया के अनुसार खोजें..." onkeyup="searchServices()">
                    </div>

                    <div id="mistri-categories" class="categories-grid">
                        <button class="cat-btn" onclick="filterByCategory('Plumber')">Plumber</button>
                        <button class="cat-btn" onclick="filterByCategory('Electrician')">Electrician</button>
                        <button class="cat-btn" onclick="filterByCategory('Carpenter')">Carpenter</button>
                        <button class="cat-btn" onclick="filterByCategory('Mason')">Mason</button>
                        <button class="cat-btn" onclick="filterByCategory('Painter')">Painter</button>
                        <button class="cat-btn" onclick="filterByCategory('AC Mechanic')">AC Mechanic</button>
                        <button class="cat-btn" onclick="filterByCategory('Tiler')">Tiler</button>
                        <button class="cat-btn" onclick="filterByCategory('Beautician')">Beautician</button>
                        <button class="cat-btn" onclick="filterByCategory('Home Cleaning')">Home Cleaning</button>
                        <button class="cat-btn" onclick="filterByCategory('Security Guard')">Security Guard</button>
                        <button class="cat-btn" onclick="filterByCategory('Laundry Service')">Laundry Service</button>
                        <button class="cat-btn" onclick="filterByCategory('Legal Consultant')">Legal Consultant</button>
                        <button class="cat-btn" onclick="filterByCategory('Private Teacher')">Private Teacher</button>
                        <button class="cat-btn" onclick="filterByCategory('Computer Repair')">Computer Repair</button>
                        <button class="cat-btn" onclick="filterByCategory('Welder')">Welder</button>
                        <button class="cat-btn" onclick="filterByCategory('DJ Service')">DJ Service</button>
                        <button class="cat-btn" onclick="filterByCategory('Driver')">Driver</button>
                        <button class="cat-btn" onclick="filterByCategory('Catering')">Catering</button>
                        <button class="cat-btn" onclick="filterByCategory('Event Planner')">Event Planner</button>
                        <button class="cat-btn" onclick="filterByCategory('Photographer')">Photographer</button>
                        <button class="cat-btn" onclick="filterByCategory('Car Mechanic')">Car Mechanic</button>
                    </div>

                    <div id="mistri-list"></div>

                    <div class="ad-container" style="width:300px;height:250px;margin:20px auto;border:1px solid #ddd;text-align:center;">
                        <script type="text/javascript">
                            atOptions = { 'key' : 'd65603602583bbe6bc3308e8ee8ab792', 'format' : 'iframe', 'height' : 250, 'width' : 300, 'params' : {} };
                            document.write('<script type="text/javascript" src="//www.highperformanceformat.com/d65603602583bbe6bc3308e8ee8ab792/invoke.js"><\/script>');
                        </script>
                    </div>

                    <button id="load-more-providers" class="main-btn" style="display:none;margin:15px auto;" onclick="loadCategories(true)">
                        Load More Services
                    </button>
                </div>

                <!-- ADD SERVICE SCREEN (sirf button safe kiya hai) -->
                <div id="add-service-screen" class="screen">
                    <div class="form-container">
                        <h3>सर्विस प्रोवाइडर जोड़ें</h3>
                        <form id="serviceForm">
                            <div class="form-field">
                                <label for="providerName">नाम</label>
                                <input type="text" id="providerName" required>
                            </div>
                            <div class="form-field">
                                <label for="providerPhone">फ़ोन नंबर (10 अंक)</label>
                                <input type="number" id="providerPhone" maxlength="10" required>
                            </div>
                            <div class="form-field">
                                <label for="serviceCategory">कैटेगरी चुनें</label>
                                <select id="serviceCategory" required>
                                    <option value="">-- चुनें --</option>
                                    <option value="Plumber">प्लम्बर (Plumber)</option>
                                    <option value="Electrician">इलेक्ट्रीशियन (Electrician)</option>
                                    <option value="Carpenter">बढ़ई (Carpenter)</option>
                                    <option value="Mason">मिस्त्री (Mason)</option>
                                    <option value="Painter">पेंटर (Painter)</option>
                                    <option value="AC Mechanic">AC मैकेनिक</option>
                                    <option value="Tiler">टाइलर (Tiler)</option>
                                    <option value="Beautician">ब्यूटीशियन</option>
                                    <option value="Home Cleaning">होम क्लीनिंग</option>
                                    <option value="Security Guard">सिक्योरिटी गार्ड</option>
                                    <option value="Laundry Service">लॉन्ड्री सर्विस</option>
                                    <option value="Legal Consultant">कानूनी सलाहकार</option>
                                    <option value="Private Teacher">प्राइवेट टीचर</option>
                                    <option value="Computer Repair">कंप्यूटर/मोबाइल रिपेयर</option>
                                    <option value="Welder">वेल्डर</option>
                                    <option value="DJ Service">DJ सर्विस</option>
                                    <option value="Driver">ड्राइवर</option>
                                    <option value="Catering">केटरिंग सर्विस</option>
                                    <option value="Event Planner">इवेंट प्लानर</option>
                                    <option value="Photographer">फोटोग्राफर</option>
                                    <option value="Car Mechanic">कार मैकेनिक</option>
                                </select>
                            </div>
                            <div class="form-field">
                                <label for="providerArea">एरिया/मोहल्ला</label>
                                <input type="text" id="providerArea" required>
                            </div>
                            <div class="form-field">
                                <label for="providerExperience">अनुभव (सालों में)</label>
                                <input type="number" id="providerExperience" required min="0">
                            </div>
                            <!-- Submit ko safe banaya – white screen nahi aayegi -->
                            <button type="button" onclick="registerService()" class="submit-btn">रजिस्टर करें</button>
                        </form>
                    </div>
                </div>

                <!-- JOBS SCREEN (tumhara original) -->
                <div id="jobs-screen" class="screen">
                    <!-- tumhara original job form yahan hai -->
                </div>

                <!-- SHARE SCREEN (tumhara original) -->
                <div id="share-screen" class="screen">
                    <!-- tumhara original share screen -->
                </div>

            </div>
        </div>
    </div>

    <!-- BOTTOM AD – AB HAMESHA DIKHEGA -->
    <div style="position:fixed; bottom:60px; left:0; right:0; z-index:10000; padding:8px 0; background:white; text-align:center; box-shadow:0 -4px 10px rgba(0,0,0,0.1);">
        <script type="text/javascript">
            atOptions = { 'key' : '969a80a2e6bea9f00173f36024f32cb2', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
            document.write('<script type="text/javascript" src="//www.highperformanceformat.com/969a80a2e6bea9f00173f36024f32cb2/invoke.js"><\/script>');
        </script>
    </div>

    <!-- BOTTOM NAVIGATION (sahi jagah pe) -->
    <div style="position:fixed; bottom:0; left:0; right:0; height:60px; z-index:9999; background:white; display:flex; justify-content:space-around; align-items:center; border-top:2px solid #2a5298; box-shadow:0 -2px 15px rgba(0,0,0,0.2);">
        <div onclick="window.showScreen('home-screen')" style="text-align:center;color:#2a5298;cursor:pointer;flex:1;padding:8px;">
            <i class="fas fa-home fa-2x"></i><p style="margin:0;font-size:11px;">Home</p>
        </div>
        <div onclick="window.showScreen('add-service-screen')" style="text-align:center;color:#2a5298;cursor:pointer;flex:1;padding:8px;">
            <i class="fas fa-handshake fa-2x"></i><p style="margin:0;font-size:11px;">Service</p>
        </div>
        <div onclick="window.showScreen('jobs-screen')" style="text-align:center;color:#2a5298;cursor:pointer;flex:1;padding:8px;">
            <i class="fas fa-briefcase fa-2x"></i><p style="margin:0;font-size:11px;">Jobs</p>
        </div>
        <div onclick="window.shareApp()" style="text-align:center;color:#2a5298;cursor:pointer;flex:1;padding:8px;">
            <i class="fas fa-share-alt fa-2x"></i><p style="margin:0;font-size:11px;">Share</p>
        </div>
    </div>

</body>
</html>
