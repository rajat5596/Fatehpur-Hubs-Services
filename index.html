<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fatehpur Hubs</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6666">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial; }
        body { background: #f5f5f5; }
        .container { max-width: 400px; margin: 0 auto; background: white; min-height: 100vh; }
        header { background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; padding: 15px; text-align: center; }
        .screen { display: none; padding: 15px; }
        .screen.active { display: block; }
        #main-search-bar { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 25px; margin: 10px 0 20px; }
        .categories-list { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px; }
        .cat-btn { background: white; border: 2px solid #e0e0e0; padding: 12px 8px; border-radius: 10px; cursor: pointer; text-align: center; font-size: 14px; }
        .cat-btn.selected { background: #2a5298; color: white; border-color: #2a5298; }
        .profile-card { background: white; border: 1px solid #e0e0e0; border-radius: 10px; padding: 15px; margin-bottom: 15px; }
        .contact-btn { background: #2a5298; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .whatsapp-btn { background: #25D366; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .share-btn-inline { background: #f8f9fa; color: #333; border: 1px solid #e0e0e0; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .footer { position: fixed; bottom: 0; width: 100%; max-width: 400px; background: white; padding: 10px 15px; display: flex; justify-content: space-between; border-top: 1px solid #e0e0e0; }
        .premium-btn { background: #ffd700; color: #333; padding: 8px 15px; border-radius: 20px; text-decoration: none; }
        .ad-container { margin: 15px 0; text-align: center; background: #f8f9fa; padding: 10px; border-radius: 8px; border: 1px solid #e0e0e0; }
        .promotion-section { margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #ff9a9e, #fad0c4); border-radius: 10px; text-align: center; }
        .contact-ads-section { margin: 20px 0; padding: 15px; background: #e6e6fa; border-radius: 10px; text-align: center; border: 2px solid #8a2be2; }
    </style>
</head>
<body>

    <!-- OTP LOGIN - INVALID PHONE NUMBER FIX -->
    <div id="loginScreen" style="position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1e3c72,#2a5298);display:flex;align-items:center;justify-content:center;z-index:9999;">
        <div style="background:white;padding:40px 30px;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,0.3);text-align:center;width:90%;max-width:400px;">
            <h2 style="color:#1e3c72;margin-bottom:10px;">Fatehpur Hubs</h2>
            <p style="color:#555;margin-bottom:20px;">Apna 10 digit number daaliye</p>
            
            <div id="recaptcha-container"></div>
            
            <input type="tel" id="phoneInput" placeholder="9876543210" maxlength="10" style="width:100%;padding:15px;margin:10px 0;border-radius:10px;border:1px solid #ddd;font-size:16px;">
            <button id="sendOtpBtn" style="width:100%;padding:15px;background:#25D366;color:white;border:none;border-radius:10px;font-size:16px;cursor:pointer;">Send OTP</button>
            <div id="otpSection" style="margin-top:20px;display:none;">
                <input type="text" id="otpInput" placeholder="123456" maxlength="6" style="width:100%;padding:15px;margin:10px 0;border-radius:10px;border:1px solid #ddd;font-size:16px;">
                <button id="verifyOtpBtn" style="width:100%;padding:15px;background:#ff9800;color:white;border:none;border-radius:10px;font-size:16px;cursor:pointer;">Verify OTP</button>
            </div>
            <p id="loginMsg" style="margin-top:15px;color:red;font-size:14px;"></p>
            <button onclick="skipLogin()" style="margin-top:20px;padding:12px 20px;background:#ff5722;color:white;border:none;border-radius:8px;font-size:14px;cursor:pointer;">Skip Login (Test)</button>
        </div>
    </div>

    <!-- Baaki sab same jaise pehle tha... (Top Ad, Header, Home Screen, etc.) -->
    <!-- MAIN APP CODE (same as before) -->
    <div class="container">
        <!-- ... tumhara pura app code yahan rahega ... -->
        <!-- Main ne sirf login part change kiya hai -->
        <!-- Baaki sab same hai jaise pehle tha -->
    </div>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="ads.js"></script>
    <script src="script.js"></script>

    <script>
        window.firebaseConfig = { /* tumhara config */ };

        let recaptchaVerifier;
        let confirmationResult;

        window.onload = () => {
            recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', { size: 'invisible' });
            recaptchaVerifier.render();

            document.getElementById('sendOtpBtn').onclick = () => {
                let phone = document.getElementById('phoneInput').value.trim();
                if (phone.length !== 10 || isNaN(phone)) {
                    document.getElementById('loginMsg').innerHTML = "10 digit number daaliye";
                    return;
                }
                phone = '+91' + phone; // AUTO +91 ADD
                document.getElementById('sendOtpBtn').innerHTML = "Sending...";
                firebase.auth().signInWithPhoneNumber(phone, recaptchaVerifier)
                    .then(c => {
                        confirmationResult = c;
                        document.getElementById('otpSection').style.display = 'block';
                        document.getElementById('sendOtpBtn').style.display = 'none';
                        document.getElementById('loginMsg').innerHTML = "<span style='color:green'>OTP bheja gaya!</span>";
                    })
                    .catch(err => {
                        document.getElementById('loginMsg').innerHTML = "Error: " + err.message;
                        document.getElementById('sendOtpBtn').innerHTML = "Send OTP";
                    });
            };

            document.getElementById('verifyOtpBtn').onclick = () => {
                const otp = document.getElementById('otpInput').value;
                if (otp.length !== 6) {
                    document.getElementById('loginMsg').innerHTML = "6 digit OTP";
                    return;
                }
                confirmationResult.confirm(otp)
                    .then(() => {
                        document.getElementById('loginScreen').style.display = 'none';
                        startFirebaseListener();
                    })
                    .catch(() => document.getElementById('loginMsg').innerHTML = "Galat OTP");
            };
        };
    </script>
</body>
</html>
